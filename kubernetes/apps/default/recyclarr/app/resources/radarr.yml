---
# yaml-language-server: $schema=https://raw.githubusercontent.com/recyclarr/recyclarr/master/schemas/config-schema.json
radarr:
  radarr:
    base_url: http://radarr.default.svc.cluster.local
    api_key: !env_var RADARR_API_KEY

    # SQP streaming quality definitions are incompatible with SQP-4 (MA Hybrid),
    # so all profiles must share one movie quality definition
    quality_definition:
      type: movie

    include:
      # SQP-1 (2160p)
      - template: radarr-quality-profile-sqp-1-2160p-default
      - template: radarr-custom-formats-sqp-1-2160p

    media_naming:
      folder: plex-tmdb
      movie:
        rename: true
        standard: p2p-scene

    quality_profiles:
      - name: &sqp1_2160_profile SQP-1 (2160p)
      - name: &sqp4_profile SQP-4 (MA Hybrid)
        reset_unmatched_scores:
          enabled: true
          except:
            - "!P2P Internal"
        upgrade:
          allowed: true
          until_quality: Bluray|WEB-2160p
          until_score: 10000
        min_format_score: 2300
        score_set: sqp-4-ma-hybrid
        quality_sort: top
        qualities:
          - name: Bluray|WEB-2160p
            qualities:
              - WEBDL-2160p
              - WEBRip-2160p
              - Bluray-2160p
          - name: Bluray|WEB-1080p
            qualities:
              - WEBDL-1080p
              - WEBRip-1080p
              - Bluray-1080p

    delete_old_custom_formats: true
    replace_existing_custom_formats: true

    custom_formats:
      # Shared unwanted for all profiles
      - trash_ids:
          - b6832f586342ef70d9c128d40c07b872 # Bad Dual Groups
          - cc444569854e9de0b084ab2b8b1532b2 # Black and White Editions
          - ae9b7c9ebde1f3bd336a8cbd1ec4c5e5 # No-RlsGroup
          - 7357cf5161efbf8c4d5d0c30b4815ee2 # Obfuscated
          - 5c44f52a8714fdd79bb4d98e2673be1f # Retags
          - f537cf427b64c38c8e36298f657e4828 # Scene
        assign_scores_to:
          - name: *sqp4_profile
          - name: *sqp1_2160_profile

      # SQP-1 (2160p) unwanted
      - trash_ids:
          - 957d0f44b592285f26449575e8b1167e # Special Edition
        assign_scores_to:
          - name: *sqp1_2160_profile

      # ==================== SQP-4 (MA Hybrid)-ONLY RULES ====================
      # Everything below is assigned only to SQP-4 (MA Hybrid) via *sqp4_only
      # Audio formats (required)
      - trash_ids:
          - 496f355514737f7d83bf7aa4d24f8169 # TrueHD Atmos
          - 2f22d89048b01681dde8afe203bf2e95 # DTS X
          - 417804f7f2c4308c1f4c5d380d4c4475 # ATMOS (undefined)
          - 1af239278386be2919e1bcee0bde047e # DD+ ATMOS
          - 3cafb66171b47f226146a0770576870f # TrueHD
          - dcf3ec6938fa32445f590a4da84256cd # DTS-HD MA
          - a570d4a0e56a2874b64e5bfa55202a1b # FLAC
          - e7c2fcae07cbada050a0af3357491d7b # PCM
          - 8e109e50e0a0b83a5098b056e13bf6db # DTS-HD HRA
          - 185f1dd7264c4562b9022d963ac37424 # DD+
          - f9f847ac70a0af62ea4a08280b859636 # DTS-ES
          - 1c1a4c5e823891c75bc50380a6866f73 # DTS
          - 240770601cc226190c367ef59aba7463 # AAC
          - c2998bd0d90ed5621d8df281e839436e # DD
        assign_scores_to: &sqp4_only
          - name: *sqp4_profile

      # HDR handling (recommended; not strictly required)
      - trash_ids:
          - 493b6d1dbec3c3364c59d7607f7e3405 # HDR
          # ⚠ Check the guide for alternative scoring If you don't share your media with others or only have devices in your chain that support DV ⚠
          - 923b6abef9b17f937fab56cfcf89e1f1 # DV (w/o HDR fallback)

          # DV Boost - Uncomment the DV Boost line if you want to prefer DV releases
          # HDR10+ Boost - Uncomment the HDR10+ Boost line if you want to prefer HDR10+ releases
          # Uncomment both lines if you want to prefer both (DV HDR10+)
          - b337d6812e06c200ec9a2d3cfa9d20a7 # DV Boost
          # - caa37d0df9c348912df1fb1d88f9273a # HDR10+ Boost
        assign_scores_to: *sqp4_only

      # Optional: disallow x265 unless HDR
      - trash_ids:
          - 839bea857ed2c0a8e084f3cbdbd65ecb # x265 (no HDR/DV)
        assign_scores_to: *sqp4_only

      # Optional: downscore SDR releases
      # Uncomment this if you prefer a lossy DV/HDR release over a lossless-audio SDR release
      - trash_ids:
          - 9c38ebb7384dada637be8899efa68e6f # SDR
        assign_scores_to: *sqp4_only

      # High-quality release groups (required)
      - trash_ids:
          - 7a0d1ad358fee9f5b074af3ef3f9d9ef # hallowed
          - 5153ec7413d9dae44e24275589b5e944 # BHDStudio
          - d66d26d37c32b0137cd26f42abaa7c2e # TheFarm - ⚠ Mandatory for this profile ⚠
          - c20f169ef63c5f40c2def54abaf4438e # WEB Tier 01
          - 403816d65392c79236dcb6dd591aeda4 # WEB Tier 02
          - af94e0fe497124d1f9ce732069ec8c3b # WEB Tier 03
          - 8df7fe4569063d39319f07e69707285a # WEBDL Boost
          # Optional preferred release groups
          - e098247bc6652dd88c76644b275260ed # FLUX
          - 8cd3ac70db7ac318cf9a0e01333940a4 # SiC
          # - 9681750c690210f0936faed781bb7f06 # 126811 - ⚠ Don't forget to read the notes in the guide related to this RlsGrp ⚠
          - 8016f2f66e751dea613e6b5b94bf633c # MainFrame
        assign_scores_to: *sqp4_only

      # Prevent 2.0 WEBDL over 5.1 BHDStudio/hallowed (required)
      - trash_ids:
          - 89dac1be53d5268a7e10a19d3c896826 # 2.0 Stereo
          - b124be9b146540f8e62f98fe32e49a2a # 1.0 Mono
        assign_scores_to: *sqp4_only

      # Repack/Proper scoring (required)
      - trash_ids:
          - e7718d7a3ce595f289bfee26adc178f5 # Repack/Proper
          - ae43b294509409a6a13919dedd4764c4 # Repack2
          - 5caaaa1c08c1742aa4342d8c4cc463f2 # Repack3
        assign_scores_to: *sqp4_only

      # Unwanted formats (required)
      - trash_ids:
          - ed38b889b31be83fda192888e2286d83 # BR-DISK
          - e6886871085226c3da1830830146846c # Generated Dynamic HDR
          - 90a6f9a284dff5103f6346090e6280c8 # LQ
          - e204b80c87be9497a8a6eaff48f72905 # LQ (Release Title)
          - b8cd450cbfa689c0259a01d9e29ba3d6 # 3D
          - bfd8eb01832d646a0a89c4deb46f8564 # Upscaled
          - 0a3f082873eb454bde444150b70253cc # Extras
          - 712d74cd88bceb883ee32f773656b1f5 # Sing-Along Versions
          - a5d148168c4506b55cf53984107c396e # Hi10P
          - cae4ca30163749b891686f95532519bd # AV1
        assign_scores_to: *sqp4_only

      # Streaming services (required)
      - trash_ids:
          - b3b3a6ac74ecbd56bcdbefa4799fb9df # AMZN
          - 40e9380490e748672c2522eaaeb692f7 # ATVP
          - cc5e51a9e85a6296ceefe097a77f12f4 # BCORE
          - 16622a6911d1ab5d5b8b713d5b0036d4 # CRiT
          - 84272245b2988854bfb76a16e60baea5 # DSNP
          - 509e5f41146e278f9eab1ddaceb34515 # HBO
          - 5763d1b0ce84aff3b21038eea8e9b8ad # HMAX
          - 526d445d4c16214309f0fd2b3be18a89 # Hulu
          - e0ec9672be6cac914ffad34a6b077209 # iT
          - 6a061313d22e51e0f25b7cd4dc065233 # MAX
          - 2a6039655313bf5dab1e43523b62c374 # MA
          - 170b1d363bd8516fbf3a3eb05d4faff6 # NF
          - c9fd353f8f5f1baf56dc601c4cb29920 # PCOK
          - e36a0ba1bc902b26ee40818a1d59b8bd # PMTP
          - 350e9170619683a55cb9191d0b1ababa # PLAY
          - 44c2b54d7c81c1a442a8b2cabeaef54f # ROKU
          - c2863d2a50c9acad1fb50e53ece60817 # STAN
        assign_scores_to: *sqp4_only

      # Optional: Preferred movie versions/editions
      # WEBDL releases rarely include editions, so most are intentionally left disabled
      # (except IMAX Enhanced in this setup)
      - trash_ids:
      # Uncomment any of the following lines to prefer these movie versions
          # - 0f12c086e289cf966fa5948eac571f44 # Hybrid - ⚠ NOT RECOMMENDED ⚠
          # - 570bc9ebecd92723d2d21500f4be314c # Remaster
          # - eca37840c13c6ef2dd0262b141a5482f # 4K Remaster
          # - e0c07d59beb37348e975a930d5e50319 # Criterion Collection
          # - 9d27d9d2181838f76dee150882bdc58c # Masters of Cinema
          # - db9b4c4b53d312a3ca5f1378f6440fc9 # Vinegar Syndrome
          # - 957d0f44b592285f26449575e8b1167e # Special Edition
          # - eecf3a857724171f968a66cb5719e152 # IMAX - ⚠ READ INFO IN THE GUIDE ⚠
          - 9f6cbff8cfe4ebbc1bde14c7b7bec0de # IMAX Enhanced
        assign_scores_to: *sqp4_only
